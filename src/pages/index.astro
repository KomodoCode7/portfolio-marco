---
import Layout from '../layouts/Layout.astro';
import Linkedin from '../components/icons/Linkedin.astro';
import Github from '../components/icons/Github.astro';
import Gmail from '../components/icons/Gmail.astro';
import SectionContainer from '../components/SectionContainer.astro';
import Code from '../components/icons/Code.astro';
import Projects from '../components/Projects.astro';
import TechStack from '../components/TechStack.astro';
import Timeline from '../components/Timeline.astro';
import Location from '../components/icons/Location.astro';
import Graduation from '../components/icons/Graduation.astro';
import Briefcase from '../components/icons/Briefcase.astro';
import Chart from '../components/icons/Chart.astro';
---

<Layout 
title="Marco Molina - Ingeniero Civil Informático | Desarrollador Full Stack"
description="Ingeniero Civil Informático titulado (2025) con experiencia desde 2023 en desarrollo full stack, herramientas cloud y sistemas empresariales. NestJS, Next.js, PostgreSQL, Cloud Run."
>
	<main class="">
		<SectionContainer id="top" class="mt-8 2xl:mt-32 mb-24 2xl:mb-64">
			
			<!-- CV-Style Hero Section -->
			<div class="max-w-[1800px] mx-auto hero-container">
				<div class="grid md:grid-cols-[300px_1fr] gap-8 md:gap-12 items-start">
					
					<!-- Foto y Badge (Izquierda) -->
					<div class="flex flex-col gap-6 items-center md:items-start hero-left">
						<picture class="hero-photo flex justify-center rounded-full overflow-hidden w-full shadow-2xl shadow-purple-500/20 border-2 border-cyan-500/90">
							<img 
								class="w-full h-auto" 
								src="./1754233231550.jpg" 
								alt="Marco Molina - Ingeniero Civil Informático"
							>
						</picture>
						

						<!-- Contacto Directo -->
						<div class="w-full flex justify-center hero-contact ">
							<div class="flex justify-between w-1/2"> 
								<a href="https://www.linkedin.com/in/marco-molina-b0199a214/" target="_blank" rel="noopener" class="flex items-center gap-3 text-sm text-white/80 hover:text-purple-500 transition-colors">
									<Linkedin class="w-5 h-5"  style={{height: 30, width: 30}}/>
								</a>
								<a href="https://github.com/KomodoCode7" target="_blank" rel="noopener" class="flex items-center gap-3 text-sm hover:text-purple-500 transition-colors">
									<Github class="w-5 h-5"  style={{height: 30, width: 30}}/>
								</a>
								<a href="mailto:marcoantonio.molina2001@gmail.com" class="flex items-center gap-3 text-sm text-white/80 hover:text-purple-500 transition-colors">
									<Gmail class="w-5 h-5"  style={{height: 30, width: 30}}/>
								</a>
							</div>
						</div>
						<div class="grid grid-cols-2 sm:grid-cols-3 gap-4 hero-metrics">
							<div class="text-center">
								<div class="metric-value text-4xl font-bold text-purple-500 mb-1" data-target="3">0</div>
								<div class="text-xs text-white/60 leading-tight">Años de Experiencia</div>
							</div>
							<div class="text-center">
								<div class="metric-value text-4xl font-bold text-green-400 mb-1" data-target="4">0</div>
								<div class="text-xs text-white/60 leading-tight">Proyectos Completados</div>
							</div>
							<div class="text-center">
								<div class="metric-value text-4xl font-bold text-yellow-400 mb-1" data-target="3">0</div>
								<div class="text-xs text-white/60 leading-tight">Roles en la Industria</div>
							</div>
						</div>
					</div>
					
					<!-- Información Profesional (Derecha) -->
					<div class="flex flex-col gap-6 hero-right">
						
						<!-- Nombre y Título -->
						<div class="hero-title border-l-4 border-purple-500 pl-6">
							<div class="grid grid-cols-1 md:grid-cols-[auto_1fr] md:items-center gap-4 mb-2">
								<h1 class="text-5xl md:text-6xl font-bold text-white mb-3">
									Marco Molina
								</h1>
								<a href="https://www.linkedin.com/in/marco-molina-b0199a214/" target="_blank" rel="noopener" class="w-full hero-badge">
									<div class="w-full bg-green-500/20 border border-green-500/40 rounded-lg px-4 py-3 text-center hover:bg-green-500/30 transition-all">
										<div class="flex items-center justify-center gap-2">
											<div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
											<span class="text-green-400 font-semibold text-sm">Disponible para nuevos proyectos</span>
										</div>
									</div>
								</a>
							</div>
							<h2 class="text-2xl md:text-3xl font-semibold text-purple-500 mb-4">
								Ingeniero Civil Informático
							</h2>
							<p class="text-lg text-white/90">
								Desarrollador Full Stack
							</p>
						</div>

						<!-- Datos Clave -->
						<div class="grid grid-cols-1 sm:grid-cols-2 gap-4 hero-cards">
							<div class="flex items-center gap-3 bg-white/5 rounded-lg px-4 py-3 border border-white/10 backdrop-blur-sm">
								<Location class="w-6 h-6" style={{color: "#ffffff" }} />
								<div>
									<p class="text-xs text-white/50 uppercase tracking-wide">Ubicación</p>
									<p class="text-sm font-medium text-white">Puerto Montt / Osorno, Chile</p>
								</div>
							</div>
							<div class="flex items-center gap-3 bg-white/5 rounded-lg px-4 py-3 border border-white/10 backdrop-blur-sm">
								<Graduation class="w-6 h-6" style={{color: "#ffffff" }} />
								<div>
									<p class="text-xs text-white/50 uppercase tracking-wide">Titulación</p>
									<p class="text-sm font-medium text-white">Agosto 2025 - ULagos</p>
								</div>
							</div>
							<div class="flex items-center gap-3 bg-white/5 rounded-lg px-4 py-3 border border-white/10 backdrop-blur-sm">
								<Briefcase class="w-6 h-6" style={{color: "#ffffff" }} />
								<div>
									<p class="text-xs text-white/50 uppercase tracking-wide">Posición Actual</p>
									<p class="text-sm font-medium text-white">Desarrollador Principal - ST Consultores</p>
								</div>
							</div>
							<div class="flex items-center gap-3 bg-white/5 rounded-lg px-4 py-3 border border-white/10 backdrop-blur-sm">
								<Chart class="w-6 h-6" style={{color: "#ffffff" }} />
								<div>
									<p class="text-xs text-white/50 uppercase tracking-wide">Experiencia Laboral</p>
									<p class="text-sm font-medium text-white">Desde 2023 (3er año de la carrera)</p>
								</div>
							</div>
						</div>

						<!-- Resumen Profesional -->
						<div class="hero-summary bg-gradient-to-br from-purple-500/5 to-purple-500/5 border border-purple-500/10 rounded-xl p-4 backdrop-blur-sm">
							<h3 class="text-sm font-bold text-purple-500 uppercase tracking-wide mb-3">Perfil Profesional</h3>
							<p class="text-base text-white/90 leading-relaxed mb-4">
								Ingeniero Civil Informático titulado con <strong>experiencia laboral en la industria desde 2023</strong>.
								Me he estado especializando en el <strong>desarrollo full-stack</strong> 
								con tecnologías modernas, diseñando productos escalables y amigables para el usuario.
							</p>
						</div>

						<!-- Métricas Clave -->


					</div>
				</div>
			</div>

			<!-- GSAP Animation Script for Hero Section -->
			<script>
				import { gsap } from 'gsap';

				document.addEventListener('DOMContentLoaded', () => {
					// Timeline maestra para coordinar todas las animaciones
					const masterTl = gsap.timeline({ defaults: { ease: 'power3.out' } });

					// 1. Animación de la foto (fade in con escala)
					gsap.set('.hero-photo', { opacity: 0, scale: 0.9 });
					masterTl.to('.hero-photo', {
						opacity: 1,
						scale: 1,
						duration: 0.8,
						ease: 'back.out(1.2)',
					});

					// 2. Badge de disponibilidad (desde abajo)
					gsap.set('.hero-badge', { opacity: 0, y: 20 });
					masterTl.to('.hero-badge', {
						opacity: 1,
						y: 0,
						duration: 0.6,
					}, '-=0.4');

					// 3. Contacto (cascada)
					gsap.set('.hero-contact a', { opacity: 0, x: -20 });
					masterTl.to('.hero-contact a', {
						opacity: 1,
						x: 0,
						duration: 0.5,
						stagger: 0.1,
					}, '-=0.3');

					// 4. Título y subtítulo (reveal desde izquierda)
					gsap.set('.hero-title h1, .hero-title h2, .hero-title p', { opacity: 0, x: -30 });
					masterTl.to('.hero-title h1', {
						opacity: 1,
						x: 0,
						duration: 0.7,
					}, '-=0.5');

					masterTl.to('.hero-title h2', {
						opacity: 1,
						x: 0,
						duration: 0.7,
					}, '-=0.5');

					masterTl.to('.hero-title p', {
						opacity: 1,
						x: 0,
						duration: 0.6,
					}, '-=0.4');

					// 5. Cards de datos clave (stagger desde arriba)
					gsap.set('.hero-cards > div', { opacity: 0, y: 30 });
					masterTl.to('.hero-cards > div', {
						opacity: 1,
						y: 0,
						duration: 0.6,
						stagger: 0.1,
					}, '-=0.4');

					// 6. Resumen profesional (fade in con escala)
					gsap.set('.hero-summary', { opacity: 0, scale: 0.95 });
					masterTl.to('.hero-summary', {
						opacity: 1,
						scale: 1,
						duration: 0.7,
					}, '-=0.3');

					// 7. Métricas con animación de contador
					const metrics = document.querySelectorAll('.metric-value');
					gsap.set(metrics, { opacity: 0, y: 20 });
					
					masterTl.to(metrics, {
						opacity: 1,
						y: 0,
						duration: 0.3,
						stagger: 0.15,
						onStart: () => {
							// Animar los contadores
							metrics.forEach((metric) => {
								const target = parseInt(metric.getAttribute('data-target') || '0');
								const obj = { value: 0 };
								
								gsap.to(obj, {
									value: target,
									duration: 1.5,
									ease: 'power2.out',
									onUpdate: () => {
										metric.textContent = Math.round(obj.value).toString();
									},
									onComplete: () => {
										metric.textContent = target + '+';
									}
								});
							});
						}
					}, '-=1.5');

					// Hover effects para las cards
					const cards = document.querySelectorAll('.hero-cards > div');
					cards.forEach(card => {
						card.addEventListener('mouseenter', () => {
							gsap.to(card, {
								y: -5,
								scale: 1.02,
								duration: 0.3,
								ease: 'power2.out',
							});
						});
						
						card.addEventListener('mouseleave', () => {
							gsap.to(card, {
								y: 0,
								scale: 1,
								duration: 0.3,
								ease: 'power2.out',
							});
						});
					});

					// Efecto hover en la foto
					const photo = document.querySelector('.hero-photo');
					if (photo) {
						photo.addEventListener('mouseenter', () => {
							gsap.to(photo, {
								scale: 1.05,
								duration: 0.4,
								ease: 'power2.out',
							});
						});
						
						photo.addEventListener('mouseleave', () => {
							gsap.to(photo, {
								scale: 1,
								duration: 0.4,
								ease: 'power2.out',
							});
						});
					}
				});
			</script>

		</SectionContainer>
		
		<!-- Timeline Profesional (reemplaza Experiencia) -->
		<SectionContainer id="timeline" class="mb-20 max-w-[900px]">
			<h2 class="text-4xl font-bold mb-8 flex gap-x-3 items-center justify-center text-white">
				Trayectoria Profesional
			</h2>
			<Timeline/>
		</SectionContainer>

		<!-- Stack Técnico con Criterio -->
		<SectionContainer id="stack" class="mb-20 w-full">
			<h2 class="text-3xl font-semibold mb-8 flex gap-x-3 items-center justify-center text-white">
				Mi Stack Técnico Usual
			</h2>
			<TechStack/>
		</SectionContainer>

		<SectionContainer id="projects" class="mb-20 max-w-[800px]">
			
			<h2 class="text-2xl font-semibold mb-6 flex gap-x-2 items-center justify-center">
				<Code class="size-6"/>
				Proyectos
			</h2>
			<Projects/>
		</SectionContainer>



	</main>
</Layout>
